<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
  <head>
    <title>JS1k 2014 demo | Threes!1k</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="icon" type="image/vnd.microsoft.icon" href="http://js1k.com/favicon.png">
    <link rel="icon" type="image/png" href="http://js1k.com/favicon.png">
    <link rel="shortcut icon" href="http://js1k.com/favicon.png" />
    
  </head>
  <frameset onload="(function(w){w&&w.focus&&w.focus();})(document.getElementsByTagName('frame')[1].contentWindow);" rows="40px,*">
    <frame marginwidth="0" marginheight="0" frameborder="0" noresize="no" src="javascript:'&lt;!doctype html&gt;\n&lt;html&gt;\n\t&lt;head&gt;\n\t\t&lt;meta charset=&quot;utf-8&quot; /&gt;\n\t\t&lt;style&gt;\n\t\t\thtml, body { margin: 0; padding: 0; border: 0; text-align: center; overflow: hidden; }\n\n\t\t\ta { color: black; text-decoration: none; border-bottom: 1px dashed black; }\n\t\t\ta:hover { border-bottom: 1px solid red; }\n\n\t\t\t.previous { float: left; margin-left: 10px; }\n\t\t\t.next { float: right; margin-right: 10px; }\n\n      div { position: absolute; top: 22px; width: 90%25; left: 5%25; text-align: center; overflow: hidden; text-overflow: ellipsis; font-style: italic; }\n\t\t&lt;/style&gt;\n\t&lt;/head&gt;\n\t&lt;body&gt;\n    \n    &lt;a href=&quot;/&quot; target=&quot;_top&quot;&gt;JS1k&lt;/a&gt; &lt;a href=&quot;/2014-dragons/&quot; target=&quot;_top&quot;&gt;2014&lt;/a&gt; demo -\n    &quot;Threes!1k&quot; by Evan Coonrod (&lt;a href=&quot;http://twitter.com/evanplus&quot; target=&quot;_blank&quot;&gt;@evanplus&lt;/a&gt;) -\n    1021 bytes -\n\n    &lt;div&gt;Tribute to Threes! for iOS. Use arrow keys to slide tiles. Combine 1 and 2 to form 3, 3 and 3 to form 6, and so on. Each move adds a tile; the game is over when no moves remain.\r&lt;/div&gt;\n\n    &lt;a href=&quot;../details/1667&quot; target=&quot;_top&quot;&gt;view details&lt;/a&gt; -\n    &lt;a href=&quot;../demos&quot; target=&quot;_top&quot;&gt;list of demos&lt;/a&gt;\n\n    &lt;a href=&quot;../demo/1664&quot; target=&quot;_top&quot; class=&quot;previous&quot;&gt;Previous&lt;/a&gt;\n    &lt;a href=&quot;../demo/1670&quot; target=&quot;_top&quot;  class=&quot;next&quot;&gt;Next&lt;/a&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;\n'" />
    <frame marginwidth="0" marginheight="0" frameborder="0" noresize="no" src="javascript:'&lt;!doctype html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;JS1k, [classic] : demo submission [1667]&lt;/title&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;style&gt;\n      html, body { margin: 0; padding: 0; border: 0; width: 100%25; height: 100%25; }\n      %23c { display: block; } /* kill scrollbars from hell */\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;canvas id=&quot;c&quot;&gt;&lt;/canvas&gt;\n    &lt;script&gt;\n      var a = document.getElementsByTagName(\'canvas\')[0];\n      var b = document.body;\n      var d = function(e){ return function(){ e.parentNode.removeChild(e); }; }(a);\n      // unprefix some popular vendor prefixed things (but stick to their original name)\n      var AudioContext =\n        window.AudioContext ||\n          window.webkitAudioContext;\n      var requestAnimationFrame =\n        window.requestAnimationFrame ||\n          window.mozRequestAnimationFrame ||\n          window.webkitRequestAnimationFrame ||\n          window.msRequestAnimationFrame ||\n          function(f){ setTimeout(f, 1000/30); };\n      // fix bug in safari: http://qfox.nl/weblog/218\n      document.body.clientWidth;\n      // auto resize (original) canvas. call `onresize(w,h) to limit the size of the canvas\n      (window.onorientationchange = window.onresize = function(a){\n        var mw = Infinity;\n        var mh = Infinity;\n        var min = Math.min;\n\n        return function(w,h){\n          if (arguments.length === 2) {\n            mw = w;\n            mh = h;\n          }\n          a.style.width = (a.width = min(mw, innerWidth)) + \'px\';\n          a.style.height = (a.height = min(mh, innerHeight)) + \'px\';\n        };\n      }(a))();\n\n      var c = a.getContext(\'2d\');\n    &lt;/script&gt;\n    &lt;script&gt;\n      // start of submission //\nb.bgColor=&quot;%23eee&quot;;c.font=&quot;17pt cursive&quot;;c.textAlign=&quot;center&quot;;E=&quot;&quot;;S=&quot;fillStyle&quot;;c.T=c.fillText;c.R=c.fillRect;V=&quot;%23000&quot;;W=&quot;%23FFF&quot;;X=&quot;%23DDD&quot;;Y=&quot;%23F68&quot;;Z=&quot;%237CF&quot;;M=Math;R=M.random;H=3;U=G();function G(a){for(g=M.ceil(3*R());2&lt;g&amp;&amp;g&lt;H&amp;&amp;0.4&gt;R();)g*=2;return a%3Fg-2:g}function O(a){p=s=0;for(k=1;5&gt;k;k++){if(k==a||!a){for(i=4;i--;)for(v=F[i],m=0;4&gt;m;m++)if(n=m+1,!v[m]&amp;&amp;v.slice(m).join(E)-0&amp;&amp;(a&amp;&amp;F[i].splice(m,1)&amp;&amp;(F[i][3]=0),s=m=5),3&lt;=v[m]&amp;&amp;v[m]==v[n]||3==v[m]+v[n])a&amp;&amp;F[i].splice(m,2,F[i][m]+F[i][n])&amp;&amp;(F[i][3]=0),s=m=5;if(a&amp;&amp;s){for(i=G();F[i%254][3];)i++;F[i%254][3]=U;U=G()}}n=[];for(i=0;4&gt;i;i++)for(n[i]=[],j=0;4&gt;j;j++)m=F[j][3-i],n[i][j]=m-0,H=M.max(H,m),c[S]=[X,Z,Y][m]||W,c.R(2+42*j,2+47*i,40,45),c[S]=3&gt;m%3FW:11&lt;m&amp;&amp;m==H%3FY:V,c.T(m||E,23+42*j,30+47*i,40),p+=3&gt;m%3F0:M.pow(3,M.log(m/3)/M.LN2+1);F=n}c[S]=[X,Z,Y][U]||W;c.R(200,30,40,45);return s}c.T(&quot;Next&quot;,220,23);F=(E+33211E7).split(E);F.push(G(),G(),G(),G());F.sort(G);for(z=4;z--;)F.push(F.splice(0,4));O();onkeyup=function(a){w=a.which;41&gt;w&amp;&amp;36&lt;w&amp;&amp;(O(w-36),O()||alert(&quot;Score: &quot;+p))}\n      // end of submission //\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n'" />
  </frameset>
</html>

